## 线程概念和多线程模型

引入线程的目的，为了减小程序并发执行时所付出的**时空开销**

线程，**轻量级进程**，一个基本的CPU执行单元，也是程序执行的最小单元

线程是进程中的**一个实体**，是被系统**独立调度和分派**的基本单位，自己**不拥有资源**

### 线程与进程的比较

#### 调度

线程是**独立调度**的基本单位，进程是**拥有资源**的基本单位

同一进程中进行线程切换，不会引起进程切换；不同进程中线程切换，会引起进程切换

#### 拥有资源

线程只拥有**必不可少的一点资源**，切换线程时空开销小

#### 并发性能

多线程之间也可以进行并发，提高并发性，提高系统吞吐量

#### **系统开销**

创建或撤销进程，都要**分配或回收资源**，线程切换只需要保存和设置少量寄存器内容

#### 系统空间和其它资源

**进程**的地址空间之间**相互独立**，**同一进程各线程**间**共享**进程资源

#### 通信

进程间通信(IPC)需要**进程同步**和**互斥手段**的辅助，保证数据一致性，线程间可以**读/写进程数据段**


### 线程的属性

- 线程是**轻型实体**，不拥有系统资源
- 不同线程可以执行相同的程序
- 同一进程中的**各个线程共享**该进程所拥有的资源
- 线程是处理机独立调度单位，多个线程可以并发执行
- 一个线程被创建后便开始了它的声明周期

### 线程的实现方式

用户级线程 & 内核级线程

![用户级线程和内核级线程](https://github.com/YC-L/Postgraduate-examination/blob/Operating-System/imgs/%E7%94%A8%E6%88%B7%E7%BA%A7%E7%BA%BF%E7%A8%8B%E5%92%8C%E5%86%85%E6%A0%B8%E7%BA%A7%E7%BA%BF%E7%A8%8B.png "用户级线程和内核级线程")

### 多线程模型

- 多对一模型，将**多个用户级线程映射到一个内核级线程**，线程管理在用户空间完成效率高，但若内核阻塞，**整个进程**都会被阻塞

- 一对一模型，将**每个用户级线程映射到一个内核级线程**，并发能力强，但创建线程开销大

- 多对多模型，将**n个用户级线程映射到m各内核级线程**上，要求 m<=n








