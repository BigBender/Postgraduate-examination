## SPOOLing技术(假脱机)

![假脱机技术](https://github.com/YC-L/Postgraduate-examination/blob/Operating-System/imgs/SPOOLing.png "假脱机技术")

- 为了缓和**CPU的高速性**与**IO设备低速性**之间的矛盾引入了脱机输入/输出技术

- 主要目的是提高**系统资源利用率**和**独占设备利用率**

- 利用专门的外围控制机，将低速IO设备上的数据传送到高速磁盘上

- SPOOLing的疑似使外部设备同时联机操作，又称为假脱机输入/输出操作

#### 是操作系统中将独占设备改造成共享设备的技术

### SPOOLing系统组成

#### 输入井和输出井

- 在磁盘上开辟出两个存储区域

- 输入井模拟脱机输入时的磁盘，收容I/O设备输入的数据

- 输出井模拟脱机输出时的磁盘，用于收容用户程序的输出数据 

#### 输入缓冲区和输出缓冲区

- 在内存中开辟两个缓冲区

- 输入缓冲区暂存由输入设备送来的数据，以后在传送到输入井

- 输出缓冲区用于暂存从输出井送来的数据，以后再传送到输出设备

####  输入进程和输出进程

- 输入进程模拟脱机输入时的**外围控制机**

- 将用户要求的数据从输入机通过输入缓冲区再送到输入井

- 当CPU需要输入数据时，直接将数据从输入井读入内存。

- 输出进程模拟脱机输出时的外围控制机

- 把用户要求输出的数据先从内存送到输出井

- 待输出设备空闲时，再将输出井中的数据经过输出缓冲区送到输出设备

![输入输出过程](https://github.com/YC-L/Postgraduate-examination/blob/Operating-System/imgs/SPOOLing-process.png)


### SPOOLing技术的管理程序

- 预输入程序

- 井管理程序

- 缓输出程序

### SPOOLing优点

- SPOOLing系统，提高了I/O速度，将独占设备**改造**为共享设备，实现了虚拟设备功能

- **高速虚拟I/O操作**：应用程序的虚拟I/O比实际I/O速度提高，缩短应用程序的执行时间（尽快完成计算，并释放占用的计算机资源）

- **实现对独享设备的共享**：SPOOLing系统中，未为任何进程分配设备，是在输入井和输出井中为进程分配一个存储区、建立一张I/O请求表

- 由SPOOLing程序提供虚拟设备，使每个使用独占设备的进程都认为是自己独占了一个设备

## SPOOLing以空间换时间

- 在SPOOLing技术下，CPU要打印机打印的数据可以先输出到磁盘的**输出井**里，然后做其他事情

- 打印机如果此时被占用，那么SPOOLing系统会把这个**打印请求挂到等待队列**上
</br>待打印机有空的时候再把数据打印出来

- 向磁盘输出数据的速度比向打印机输出数据的速度快，节省了大量时间

### 典型例题

- 采用SPOOLing技术的目的是 **提高独占设备的利用率**