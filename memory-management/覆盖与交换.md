## 覆盖与交换

### 覆盖(单分区，单用户单任务)

- 目标是在较小的可用内存中运行较大的程序。常用于多道程序系统，与固定分区存储管理配合使用

- 将**经常活跃**的部分放在**固定区**，将**即将访问**的段放入**覆盖区**，其它段放在外存

- 打破了将一个进程全部信息装入主存后才能运行的限制

### 交换(对换，不同的进程之间)

- 交换单位为整个进程的地址空间

- 常用于多道程序系统或小型分时系统中，与可重定位分区分配存储管理配合使用，又称作 滚进/滚出(roll-in/roll-out)

- **换出**：把处于**等待状态**的程序从**内存移到辅存**，腾出内存空间

- **换入**：把**准备好**竞争CPU运行的程序从**辅存移到内存**

- **交换技术**主要在**不同进程**(或作业)之间进行，**覆盖**则用于**同一个程序**或进程中

### 交换技术需要注意

- 交换需要备份存储，通常是快速磁盘，它必须足够大，并且提供对这些内存映像的直接访问

- 为了有效使用CPU，需要每个**进程的执行时间比交换时间长**，影响交换时间的主要是转移时间

- 转移时间与所交换的**内存空间**成**正比**

- 换出进程，必须确保该进程完全处于空闲状态

- 交换空间通常作为磁盘的一整块，且独立于文件系统，使用可能很快

- 普通的交换使用不多，交换策略的某些变种在许多系统(例如UNIX)发挥作用

### 交换技术主要在不同进程(或作业)之间进行，而覆盖则用于同一个程序或进程中

- 由于覆盖技术要求给出程序段之间的覆盖结构，使得其**对用户和程序员不透明**

- 所以对于主存无法存放用户程序的矛盾，现代操作系统通过**虚拟内存技术**解决

- 交换主要是在进程或作业之间进行，而覆盖则主要在同一作业或进程内进行

- 另外覆盖只能覆盖那些与覆盖程序段无关的程序段

### 覆盖技术与虚拟存储技术有何区别

- 覆盖程序段的最大长度受**内存容量大小限制**

- 虚拟存储器中程序的最大长度不受内存容量限制，而只**受计算机地址结构的限制**

- 覆盖技术中的**覆盖段由程序员设计**，要求覆盖段中的各个覆盖具有**相对独立性**，不存在直接联系或相互交叉访问

### 交换技术与虚拟存储技术中使用的调入/调出技术有何相同与不同之处

- 把暂时不用的某个程序以及数据从内存移到外存中去，以便腾出必要的内存空间，或把指定的程序或数据从外存读到内存中的一种内存扩充技术

- 主要区别：交换技术调入/调出整个过程，因此一个进程的大小要受**内存容量大小**的限制

- 而虚存中使用的调入/调出技术在**内存和外存之间来回传递的是页面或分段**

- 而不是整个进程，从而使得进程的地址映射具有了更大的灵活性，且允许进程的大小比可用的内存空间大

#### 典型例题

- 在使用交换技术时，如果一个进**程正在IO操作**，不能交换出主存，否则它的IO数据区将被新换入的进程占用

- 存储管理中，采用覆盖与交换技术的目的，节省主存空间，逻辑上扩充主存


