## 磁盘结构

### 磁盘存储器

- 磁盘存储器：随机读写共享设备，可移动介质

- 特点:容量大，速度快

- 管理要求：合理分配空间、访问效率高，容错能力强。其性能直接影响文件系统的性能指标

### 磁盘

- 通过磁头的导体线圈从磁盘中存取数据

- 读写期间，**磁头固定**，磁盘在下面高速旋转

### 磁道，磁盘盘面上数据存储在一组**同心圆**中

- 每个**磁道与磁头一样宽**，一个盘面有上千个磁道

### 扇区

- 按**固定的角度**划分的磁道，每个扇区固定存储大小(通常512B)，一个扇区称为一个**盘块**

### 柱面

- 相同磁道旋转形成的圆柱，各磁盘相同位置上磁道集合

- 相邻磁道与相邻扇区通过一定间隙分隔开

### 磁盘存储能力限制

- 由于扇区按固定圆心角度划分，密度从最外道向里增加

- 磁盘的存储能力**受限于内道的最大记录密度**

- 扇区是磁盘可寻址的**最小存储单位**，**磁盘地址**用"柱面号\*盘面号\*扇区号"表示

![image](https://github.com/YC-L/Postgraduate-examination/blob/Operating-System/imgs/Disk-surface.png "磁盘盘面")
- 磁盘盘面

![image](https://github.com/YC-L/Postgraduate-examination/blob/Operating-System/imgs/Disk-driver.png "磁盘驱动器")
- 磁盘驱动器

### 固定头磁盘

- 磁头相对于盘片的径向方向固定，一个磁道一个磁头

### 活动头磁盘

- 磁头可移动，磁头臂来回伸缩定位磁道

### 固定盘磁盘

- 磁盘永久固定在磁盘驱动器内

### 可换盘磁盘

- 可移动和替换的

### 典型例题

- 有一磁盘，共有10个柱面，20个记录面，每个磁道分成16个扇区，每个簇的大小为4个扇区

- 采用位示图对存储空间进行管理，如果字长是16位，那么位示图共需 10\*20\*16/4 个字

- 确定一个盘块所在位置必须给出三个参数: 盘面，柱面号和盘区号

- 磁带是一种顺序存储设备，用它做存储介质时，文件只能组织成顺序文件

- 既可以随机访问又可以顺序访问的是光盘，U盘，磁盘

- 磁盘上的文件以**块**为单位读/写

- 假定磁带记录密度为每英寸(1 in = 0.0524m) 400 字符，每一逻辑记录为80字符，块间隙为0.4英寸，现在有3000个逻辑记录需要存储，试计算存储这些记录需要多长的磁带?磁带利用率是多少
- 一个逻辑记录占用的磁带长度，80/400=0.2英寸，存储3000个需要(0.2+0.4)\*3000=1800英寸，利用率为: 0.2/(0.2 + 0.4) = 33.3%

- 一个新的磁盘是一个空白版，必须分成扇区以便磁盘控制器能读和写，称为低级格式化
- 低级格式化为每个扇区采用特别的数据结构，包括校验码
- 为了使用磁盘存储文件，操作系统还需要将自己的数据结构记录在磁盘上，分为两步
- 第一步将磁盘分为由一个或多个柱面组成的分区，**每个分区**可以作为一个**独立的磁盘**
- 分区之后，第二步是逻辑格式化，os将初始的文件系统数据结构存储到磁盘上，这些数据结构包括空闲和已分配的空间和一个初始为空的目录

- 假定一个磁盘组共有100个柱面，每个柱面有8个磁道，每个磁道划分成8个扇区
- 现有5000个逻辑记录的文件，逻辑及记录的大小与扇区大小相等，该文件以顺序结构被存放在磁盘组上，柱面、磁道、扇区均从0开始编址，逻辑记录的编号从0开始，文件信息从0柱面、0磁道、0扇区开始存放，试问，该文件的3468个逻辑记录应存放在哪个柱面的第几个磁道的第几个扇区上？
- 该磁盘有8个盘面，一个柱面大小为8\*8=64个扇区，由于所有磁道是固定在一起的，因此在存放数据时，**先存满扇区**，**再存满磁道**，**然后存满柱面**
- 对应的柱面号，3468/64=54，对应的磁道号 3468%64/8=1，对应的扇区号为3468%64%8=4

- 如果将磁盘替换为随机访问的Flash半导体存储器，是否有比C-SCAN更高效的磁盘调度策略
- 采用FCFS更高效，因为**Flash半导体存储器的物理结构**，**不需要考虑**寻道时间和旋转延迟，可以**直接按IO请求**的先后顺序






